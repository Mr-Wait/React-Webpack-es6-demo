(function(a){a.fn.Slider=function(c){c=a.extend({startSlide:0,item:".DSlider-item",isFlexible:false,isShowPage:true,isShowTitle:true,titleAttr:"data-title",isShowControls:true,isAuto:true,intervalTime:5000,affectTime:300,mode:"move",direction:"left",},c);var b={init:function(d){this.$itemWrap=d;this.$item=this.$itemWrap.children(c.item);this.size=this.$item.size();this.curIndex=c.startSlide;b.setLayout(this.itemWrap);c.isAuto&&b.autoPlay();c.isFlexible&&a(window).on("resize",a.proxy(b["resize"],this))},setLayout:function(){this.$itemWrap.wrap("<div class='DSlider-wrap' />");this.wrap=this.$itemWrap.parent();if(c.isShowControls){this.$Controls=a("<div class='showControl'><a class='prev'></a><a class='next'></a></div>").appendTo(this.wrap);b.controlsClick(this.$itemWrap)}if(c.isShowTitle){this.$Titles=a("<div class='showTitle' />").appendTo(this.wrap);b.setTitle(this.$itemWrap)}if(c.isShowPage){this.$pages=a("<ul class='showPage' />");for(var d=1;d<=this.size;d++){a("<a href='javascript:;'>"+d+"</a>").appendTo(this.$pages)}this.$pages.appendTo(this.wrap);b.setPage();b.pagesClick()}if(c.mode=="fade"){b.setFade()}b.setCss()},setPage:function(){if(!c.isShowPage||!this.$pages){return}this.$pages.find("a").eq(this.curIndex).addClass("active").siblings().removeClass("active")},setTitle:function(){if(!c.isShowTitle||!this.$Titles){return}var d=this.$item.eq(this.curIndex);a.isFunction(c.titleAttr)?c.titleAttr.call(d,this.curIndex):this.$Titles.html(d.attr(c.titleAttr))},controlsClick:function(){var d=this;d.$Controls.find(".next").on("click",function(){if(d.curIndex+1==d.size){b[c.mode](d.$item.eq(0))}else{b[c.mode](d.$item.eq(d.curIndex+1))}});this.$Controls.find(".prev").on("click",function(){if(d.curIndex==0){b[c.mode](d.$item.eq(d.size-1))}else{b[c.mode](d.$item.eq(d.curIndex-1))}})},pagesClick:function(){var d=this;d.$pages.find("a").on("click",function(){var f=a(this);var e=f.index();if(d.curIndex!=e){b[c.mode](f)}})},move:function(g){if(c.mode!="move"){return}this.$itemWrap.stop();g=(g.index()>=0)?g:this.$item.eq(c.startSlide);var e=g.index();if(c.direction=="left"){var f=this.$item.width();this.$itemWrap.animate({left:"-"+f*e+"px"},c.affectTime)}else{if(c.direction=="top"){var d=this.$item.height();this.$itemWrap.animate({top:"-"+d*e+"px"},c.affectTime)}}this.curIndex=e;b.setPage();b.setTitle()},setFade:function(){this.$item.hide().eq(this.curIndex).show()},setCss:function(){if(c.mode!="move"&&c.mode!="fade"){return}if(c.mode=="move"){if(c.direction=="left"){this.$itemWrap.css({"width":this.size*100+"%","position":"relative"});this.$item.width(this.wrap.width())}else{if(c.direction=="top"){this.$itemWrap.css({"height":this.size*100+"%","position":"relative"});this.$item.height(this.wrap.height());this.$item.css({"clear":"left"})}}}else{this.$itemWrap.css("width","100%");this.$item.css("position","absolute")}},fade:function(e){if(c.mode!="fade"){return}this.$itemWrap.stop();e=(e.index()>=0)?e:this.$item.eq(c.startSlide);var d=e.index();this.$item.fadeOut(c.affectTime).eq(d).fadeIn(c.affectTime);this.curIndex=d;b.setPage();b.setTitle()},resize:function(){var d=this;var e=d.wrap.width();d.$item.each(function(){a(this).width(e)})},autoPlay:function(){if(!c.isAuto){return}var d=this;clearInterval(this.playTimer);this.playTimer=setInterval(function(){b[c.mode](d.$item.eq(d.curIndex+1))},c.intervalTime)}};return this.each(function(){b.init(a(this))})}})(window.jQuery);